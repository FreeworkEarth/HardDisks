# Simplified LAMMPS test for 2D hard disk with movable wall
units           lj
dimension       2
atom_style      atomic
atom_modify     map yes
boundary        f f p

# Box
region          box block -10 10 -5 5 -0.5 0.5
create_box      2 box

# Particles on lattice (more controlled)
lattice         sq 0.5  # 2D square lattice, spacing 0.5
region          left_fill block -9 -1 -4 4 -0.5 0.5
region          right_fill block 1 9 -4 4 -0.5 0.5
create_atoms    1 region left_fill
create_atoms    1 region right_fill

# Wall at center
create_atoms    2 single 0 0 0

mass            1 1.0
mass            2 50.0

group           particles type 1
group           wall_atom type 2

# Soft WCA potential with smaller epsilon for stability
pair_style      lj/cut 1.122462
pair_modify     shift yes
pair_coeff      1 1 0.1 1.0 1.122462  # Softer epsilon=0.1
pair_coeff      1 2 0.1 1.0 1.122462
pair_coeff      2 2 0.0 1.0 1.122462

# Walls
fix             walls_y particles wall/reflect yhi EDGE ylo EDGE
fix             walls_x particles wall/reflect xhi EDGE xlo EDGE

# Initialize velocities (lower temperature)
velocity        particles create 0.1 12345
velocity        wall_atom set 0 0 0
fix             wall_yz wall_atom setforce NULL 0 0

# Integration with smaller timestep
timestep        0.0001
fix             1 particles nve
fix             2 wall_atom nve

# Output
thermo          100
thermo_style    custom step temp ke atoms

# Test run
run             1000

print           "Test successful!"
